<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MANTIS: mos/share/include/command_daemon.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.3-20050530 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">mos</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000019.html">share</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000020.html">include</a></div>
<h1>command_daemon.h File Reference</h1>Mantis Commander. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="com_8h-source.html">com.h</a>&quot;</code><br>
<code>#include &lt;stdbool.h&gt;</code><br>

<p>
<a href="command__daemon_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a0">MOS_COMMANDER_STACK_SIZE</a>&nbsp;&nbsp;&nbsp;164</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a1">IFACE_STDIO</a>&nbsp;&nbsp;&nbsp;IFACE_SERIAL</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a2">prompt_uint8</a> (char *string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the given string for a prompt and return an int response.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a3">prompt_long</a> (char *string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the given string for a prompt and return a long response.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a4">prompt_longlong</a> (char *string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the given string return a 4-byte integer response.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a5">prompt_char</a> (char *string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the given string for a prompt and return a one byte response.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a6">mos_command_parse</a> (<a class="el" href="structcomBuf__t.html">comBuf</a> *recvd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parses incoming packets.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a7">mos_register_function</a> (char *name, void(*func_pointer)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers a function to be called on string input.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a8">mos_command_daemon_init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the command daemon.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a9">mos_command_daemon</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thead which listens for input over the serial line.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a10">mos_clear_ext_timer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the command to tell the shell to reset it's timer.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a11">mos_show_ext_timer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the command telling the shell to show it's timer.  <a href="#a11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="command__daemon_8h.html#a12">mos_show_and_clear_ext_timer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the command telling the shell to show then clear it's timer.  <a href="#a12"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Mantis Commander. 
<p>
This is an application which will allow interfacing with a nymph from a computer over the serial line, it provides arbitrary functions. <dl compact><dt><b>Author:</b></dt><dd>Charles Gruenwald III </dd></dl>
<dl compact><dt><b>Date:</b></dt><dd>Created: 04/14/2004</dd></dl>

<p>
Definition in file <a class="el" href="command__daemon_8h-source.html">command_daemon.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1"></a><!-- doxytag: member="command_daemon.h::IFACE_STDIO" ref="a1" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define IFACE_STDIO&nbsp;&nbsp;&nbsp;IFACE_SERIAL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="command__daemon_8h-source.html#l00120">120</a> of file <a class="el" href="command__daemon_8h-source.html">command_daemon.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0"></a><!-- doxytag: member="command_daemon.h::MOS_COMMANDER_STACK_SIZE" ref="a0" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MOS_COMMANDER_STACK_SIZE&nbsp;&nbsp;&nbsp;164          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="command__daemon_8h-source.html#l00024">24</a> of file <a class="el" href="command__daemon_8h-source.html">command_daemon.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a10"></a><!-- doxytag: member="command_daemon.h::mos_clear_ext_timer" ref="a10" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void mos_clear_ext_timer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the command to tell the shell to reset it's timer. 
<p>
The shell has some timing functions built in so that the timing on the node may be tested. This command tells the shell to reset it's internal timer to zero.    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="command_daemon.h::mos_command_daemon" ref="a9" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void mos_command_daemon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Thead which listens for input over the serial line. 
<p>
This is the actual thread that accepts commands over serial, parses them, and executes commands.    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="command_daemon.h::mos_command_daemon_init" ref="a8" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void mos_command_daemon_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the command daemon. 
<p>
The mos_command_daemon thread used to initialize the command list. This is a problem for applications that want to register their own commands, since they don't know how soon the daemon thread will finish initializing the list. Applications which want to add their own commands should call mos_command_daemon_init first.<p>
For backward compatibility mos_command_daemon still calls mos_command_daemon_init, and mos_command_daemon_init can be called more than once.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="command_daemon.h::mos_command_parse" ref="a6" args="(comBuf *recvd)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool mos_command_parse           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structcomBuf__t.html">comBuf</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>recvd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Parses incoming packets. 
<p>
This is a system function which parses an incoming packet, and calls a function if it finds a match. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>recvd</em>&nbsp;</td><td>Packet received</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member="command_daemon.h::mos_register_function" ref="a7" args="(char *name, void(*func_pointer)(void))" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool mos_register_function           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void(*)(void)&nbsp;</td>
          <td class="mdname" nowrap> <em>func_pointer</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a function to be called on string input. 
<p>
Takes the string to be typed in and the function to be called and returns the success or failure of registration. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>String to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>func_pointer</em>&nbsp;</td><td>Function to register </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success or failure of registration</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a12"></a><!-- doxytag: member="command_daemon.h::mos_show_and_clear_ext_timer" ref="a12" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void mos_show_and_clear_ext_timer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the command telling the shell to show then clear it's timer. 
<p>
This tells the shell to show the elapsed time on it's internal timer, then clear the current running value.    </td>
  </tr>
</table>
<a class="anchor" name="a11"></a><!-- doxytag: member="command_daemon.h::mos_show_ext_timer" ref="a11" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void mos_show_ext_timer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the command telling the shell to show it's timer. 
<p>
This tells the shell to show the elapsed time on it's internal timer.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="command_daemon.h::prompt_char" ref="a5" args="(char *string)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char prompt_char           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>string</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send the given string for a prompt and return a one byte response. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>String to be sent </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Single byte response</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="command_daemon.h::prompt_long" ref="a3" args="(char *string)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint16_t prompt_long           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>string</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send the given string for a prompt and return a long response. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>String to be sent </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Multiple byte response</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="command_daemon.h::prompt_longlong" ref="a4" args="(char *string)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t prompt_longlong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>string</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send the given string return a 4-byte integer response. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>String to be sent </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Multiple byte response</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="command_daemon.h::prompt_uint8" ref="a2" args="(char *string)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t prompt_uint8           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>string</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send the given string for a prompt and return an int response. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>String to be sent </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Integer response</dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jul 27 17:00:36 2005 for MANTIS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.3-20050530 </small></address>
</body>
</html>
